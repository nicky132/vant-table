<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VantTable åœ¨çº¿æ¼”ç¤º</title>
    <meta name="description" content="åŸºäº Vant UI çš„åŠŸèƒ½ä¸°å¯Œçš„è¡¨æ ¼ç»„ä»¶åœ¨çº¿æ¼”ç¤º">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“Š</text></svg>">
    
    <!-- Vue 3 å’Œ Vant 4 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vant@4/lib/vant.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/vant@4/lib/index.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        .demo-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .demo-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }
        .demo-description {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        .github-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .github-link:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        .npm-link {
            display: inline-block;
            background: #cb3837;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            margin: 0 5px 20px 0;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }
        .npm-link:hover {
            background: #a12e2a;
        }
        .selection-info {
            margin-bottom: 15px;
            color: #666;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .demo-table {
            border: 1px solid #ebeef5;
            border-radius: 8px;
            overflow: hidden;
        }
        .table-header {
            background: #f8f9fa;
            display: flex;
            border-bottom: 1px solid #ebeef5;
        }
        .table-cell {
            padding: 12px 16px;
            flex: 1;
            border-right: 1px solid #ebeef5;
            font-weight: 500;
            color: #333;
        }
        .table-cell:last-child {
            border-right: none;
        }
        .table-row {
            display: flex;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }
        .table-row:hover {
            background: #fafafa;
        }
        .table-row:last-child {
            border-bottom: none;
        }
        .table-data {
            padding: 12px 16px;
            flex: 1;
            border-right: 1px solid #f0f0f0;
            color: #666;
        }
        .table-data:last-child {
            border-right: none;
        }
        .status-tag {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .status-normal {
            background: #e6f7ff;
            color: #1890ff;
        }
        .status-disabled {
            background: #fff2e8;
            color: #fa8c16;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        const { createApp, ref, computed } = Vue;
        const { showToast } = vant;

        // æ¨¡æ‹Ÿè¡¨æ ¼æ•°æ®
        const generateTableData = (count = 40) => {
            const data = [];
            const departments = ['æŠ€æœ¯éƒ¨', 'äº§å“éƒ¨', 'è¿è¥éƒ¨', 'è®¾è®¡éƒ¨', 'å¸‚åœºéƒ¨'];
            
            for (let i = 1; i <= count; i++) {
                data.push({
                    id: i,
                    name: `ç”¨æˆ·${i}`,
                    department: departments[Math.floor(Math.random() * departments.length)],
                    email: `chengsanshiba@example.com`,
                    phone: `1380013800${i.toString().padStart(2, '0')}`,
                    status: i === 39 ? 'ç¦ç”¨' : 'æ­£å¸¸'
                });
            }
            return data;
        };

        // VantTableç»„ä»¶
        const VantTable = {
            props: {
                headers: Array,
                data: Array,
                height: Number,
                selectable: Boolean,
                selectMode: String,
                maxSelectCount: Number
            },
            setup(props, { emit }) {
                const selectedKeys = ref([]);

                const toggleSelect = (item) => {
                    const index = selectedKeys.value.indexOf(item.id);
                    if (index > -1) {
                        selectedKeys.value.splice(index, 1);
                    } else {
                        if (props.maxSelectCount && selectedKeys.value.length >= props.maxSelectCount) {
                            showToast('æœ€å¤šåªèƒ½é€‰æ‹© ' + props.maxSelectCount + ' é¡¹');
                            return;
                        }
                        selectedKeys.value.push(item.id);
                    }
                    emit('selection-change', { selectedRows: selectedKeys.value });
                };

                const toggleSelectAll = () => {
                    if (selectedKeys.value.length === props.data.length) {
                        selectedKeys.value = [];
                    } else {
                        selectedKeys.value = props.data.slice(0, props.maxSelectCount || props.data.length).map(item => item.id);
                    }
                    emit('selection-change', { selectedRows: selectedKeys.value });
                };

                const isSelected = (item) => selectedKeys.value.includes(item.id);
                const isAllSelected = computed(() => selectedKeys.value.length === props.data.length);

                return {
                    selectedKeys,
                    toggleSelect,
                    toggleSelectAll,
                    isSelected,
                    isAllSelected
                };
            },
            template: `
                <div class="demo-table" :style="{ height: height + 'px', overflow: 'auto' }">
                    <div class="table-header">
                        <div v-if="selectable" class="table-cell" style="flex: 0 0 50px; text-align: center;">
                            <input type="checkbox" :checked="isAllSelected" @change="toggleSelectAll" v-if="selectMode === 'checkbox'">
                        </div>
                        <div v-for="header in headers" :key="header.key" class="table-cell" :style="{ flex: header.width ? '0 0 ' + header.width + 'px' : '1' }">
                            {{ header.label }}
                        </div>
                    </div>
                    <div v-for="item in data" :key="item.id" class="table-row">
                        <div v-if="selectable" class="table-data" style="flex: 0 0 50px; text-align: center;">
                            <input type="checkbox" :checked="isSelected(item)" @change="toggleSelect(item)" v-if="selectMode === 'checkbox'">
                        </div>
                        <div v-for="header in headers" :key="header.key" class="table-data" :style="{ flex: header.width ? '0 0 ' + header.width + 'px' : '1' }">
                            <span v-if="header.key === 'status'" :class="['status-tag', item.status === 'æ­£å¸¸' ? 'status-normal' : 'status-disabled']">
                                {{ item[header.key] }}
                            </span>
                            <span v-else>{{ item[header.key] }}</span>
                        </div>
                    </div>
                </div>
            `
        };

        const app = createApp({
            components: {
                VantTable
            },
            setup() {
                const tableData = generateTableData(40);
                const selectedKeys = ref([]);

                const basicHeaders = [
                    { key: 'id', label: 'ID', width: 80 },
                    { key: 'name', label: 'å§“å', width: 120 },
                    { key: 'department', label: 'éƒ¨é—¨' },
                    { key: 'email', label: 'é‚®ç®±' },
                    { key: 'phone', label: 'ç”µè¯', width: 140 },
                    { key: 'status', label: 'çŠ¶æ€', width: 100 }
                ];

                const handleSelectionChange = (event) => {
                    selectedKeys.value = event.selectedRows;
                };

                return {
                    tableData,
                    basicHeaders,
                    selectedKeys,
                    handleSelectionChange
                };
            },
            template: `
                <div class="demo-container">
                    <a href="https://github.com/nicky132/vant-table" class="github-link" target="_blank">
                        â­ GitHub
                    </a>

                    <div class="header">
                        <h1>ğŸš€ VantTable ç»„ä»¶é¢„è§ˆ</h1>
                        <p>åŸºäº Vant UI çš„åŠŸèƒ½ä¸°å¯Œçš„è¡¨æ ¼ç»„ä»¶</p>
                        <div style="margin-top: 20px;">
                            <a href="https://www.npmjs.com/package/@nicky132/vant-table" class="npm-link" target="_blank">
                                ğŸ“¦ NPM
                            </a>
                            <a href="/vant-table/" class="npm-link" target="_blank" style="background: #24292e;">
                                ğŸ“– è¿”å›æ–‡æ¡£
                            </a>
                        </div>
                    </div>

                    <div class="demo-card">
                        <h2 class="demo-title">ğŸš€ åŸºç¡€è¡¨æ ¼ - æ”¯æŒä¸Šæ‹‰åŠ è½½æ›´å¤šå’Œå¤é€‰æ¡†å¤šè¡Œé«˜äº®</h2>
                        <p class="demo-description">å±•ç¤ºåŸºæœ¬çš„è¡¨æ ¼åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å±•ç¤ºå’ŒåŸºç¡€æ“ä½œ</p>
                        <VantTable
                            :headers="basicHeaders"
                            :data="tableData.slice(35, 45)"
                            :height="400"
                        />
                    </div>

                    <div class="demo-card">
                        <h2 class="demo-title">é€‰ä¸­çš„è¡Œ:</h2>
                        <div class="selection-info">
                            å·²é€‰æ‹©: {{ selectedKeys.length }} é¡¹
                            <span v-if="selectedKeys.length > 0">
                                ({{ selectedKeys.join(', ') }})
                            </span>
                        </div>
                        <h2 class="demo-title">åŠ è½½çŠ¶æ€æ§åˆ¶:</h2>
                        <VantTable
                            :headers="basicHeaders"
                            :data="tableData.slice(10, 25)"
                            :height="400"
                            selectable
                            select-mode="checkbox"
                            :max-select-count="3"
                            @selection-change="handleSelectionChange"
                        />
                    </div>
                </div>
            `
        });

        app.use(vant);
        app.mount('#app');
    </script>
</body>
</html>